(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a05a5358"],{"7b7d":function(t,e,a){},"930a":function(t,e,a){"use strict";var o=a("7b7d"),n=a.n(o);n.a},b35f:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"300px"}},[a("h2",{staticClass:"content-block"},[t._v("Prospecção")]),a("div",{staticClass:"content-block"},[a("div",{staticClass:"dx-card responsive-paddings"},[a("div",{attrs:{id:"form-container"}},[a("dx-scheduler",{attrs:{"data-source":t.dataSource,"current-date":t.currentDate,views:t.views,"start-day-hour":0,"end-day-hour":24,"remote-filtering":!0,height:700,"current-view":"day","text-expr":"Text","start-date-expr":"StartDate","end-date-expr":"EndDate","all-day-expr":"AllDay","cross-scrolling-enabled":!1,"show-all-day-panel":!1,"on-content-ready":t.onContentReady,"on-appointment-form-opening":t.onAppointmentFormOpening,timeZone:t.timeZone,"first-day-of-week":0}},[a("dx-resource",{attrs:{"data-source":t.situacoes,"allow-multiple":!1,label:"Situação","field-expr":"Situacao"}})],1)],1)])])])},n=[],i=(a("ac6a"),a("b867")),r=a("2919"),d=a("7f45"),c=a.n(d),l=a("2597"),s=a.n(l),u=a("5097"),m=a.n(u);a("43bb"),a("1c46");function p(t){return void 0!==t&&null!==t&&""!==t}function f(t){if(!t.ok)throw Error(t.statusText);return t}var x=new m.a({key:"id",filter:["startDateTimeZone","America/Sao_Paulo"],store:new s.a({load:function(t){console.log(t),window.xx=t;var e=null,a=null,o="?",n=null;if("filter"in t&&p(t["filter"])){o=t.filter,n=o[0];var i=n[0];_.isArray(i)&&i.forEach(function(t){"EndDate"===t[0]&&(a=t[2]),"StartDate"===t[0]&&(e=t[2])})}JSON.stringify([e,a]);return fetch("".concat(r["a"],"/prospeccao?StartDate=").concat(e,"&&EndDate=").concat(a),{method:"GET"}).then(f).then(function(t){return t.json()}).then(function(t){console.log("load result ",t.data);var e=[];return t.data.forEach(function(t){delete t["RecurrenceRule"],t.startDateTimeZone="America/Sao_Paulo",t.endDateTimeZone="America/Sao_Paulo";var a=c.a.tz(t.StartDate,"America/Sao_Paulo"),o=c()(a.format()).utc(a.format()),n=c.a.tz(o.format(),"America/Sao_Paulo");console.log(" = "+"titulo: ".concat(t.Text," - ").concat(n.format()," - ").concat(t.StartDate));var i=c.a.tz(t.EndDate,"America/Sao_Paulo"),r=c()(i.format()).utc(i.format()),d=c.a.tz(r.format(),"America/Sao_Paulo");t.EndDate=d.format(),console.log(" = "+"titulo FIM: ".concat(t.Text," - ").concat(d.format()," - ").concat(t.EndDate)),e.push(t)}),e})},insert:function(t){return fetch("".concat(r["a"],"/prospeccao"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(f)},remove:function(t){return fetch("".concat(r["a"],"/prospeccao/").concat(encodeURIComponent(t.id)),{method:"DELETE"}).then(f)},update:function(t,e){delete e.startDateTimeZone,delete e.endDateTimeZone,console.log("values ",e.StartDate);var a=c.a.tz(e.StartDate,"America/Sao_Paulo"),o=c.a.tz(e.EndDate,"America/Sao_Paulo"),n=c()(o.format()).utc(o.format());return console.log("Inicio: ".concat(e.StartDate," - convertido: ").concat(a)),console.log("Fim: ".concat(e.EndDate," - convertido: ").concat(o,"  - utc: ").concat(n)),fetch("".concat(r["a"],"/prospeccao/").concat(encodeURIComponent(t)),{method:"PUT",body:JSON.stringify({id:t.id,Text:e.Text,StartDate:a,EndDate:o,Description:e.Description,Padrinho:e.Padrinho,Consultor:e.Consultor,Situacao:e.Situacao}),headers:{"Content-Type":"application/json"}}).then(f)}}),paginate:!1}),D={components:{DxScheduler:i["DxScheduler"],DxResource:i["DxResource"]},mounted:function(){window.w=this,window.moment=this.$moment},data:function(){return{groups:["Situacao"],editing:{allowAdding:!1},views:["day","workWeek","month","week"],currentDate:new Date,dataSource:x,timeZone:"America/Sao_Paulo",situacoes:[{id:"ABERTO",text:"ABERTO",color:"#417e09"},{id:"FINALIZADO",text:"FINALIZADO",color:"#9ea5a5"}]}},methods:{onContentReady:function(t){console.log("onContentReady= ",t),this.scheduler=t.component},onAppointmentFormOpening:function(t){var e=t.form;t.appointmentData.id,t.appointmentData.startDate;e.option("colCount",1),e.option("items",[{label:{text:"Título"},dataField:"Text",name:"Text",editorType:"dxTextBox",validationRules:[{type:"required",message:"Informe o título."}],editorOptions:{width:"100%",value:t.appointmentData.Text,readOnly:!1}},{label:{text:"Email"},dataField:"Email",name:"Email",editorType:"dxTextBox",validationRules:[{type:"email",message:"Informe um email válido!."}],editorOptions:{width:"100%",value:t.appointmentData.Email,readOnly:!1}},{label:{text:"Celular"},dataField:"Celular",name:"Email",editorType:"dxTextBox",editorOptions:{width:"100%",value:t.appointmentData.Email,readOnly:!1,mask:"(00) 00000-0000"}},{label:{text:"Anotações"},dataField:"Description",name:"Description",editorType:"dxTextArea",editorOptions:{width:"100%",value:t.appointmentData.Description,readOnly:!1,colSpan:"1"}},{dataField:"StartDate",editorType:"dxDateBox",label:{text:"Início"},validationRules:[{type:"required",message:"Informe a data de início."}],editorOptions:{width:"100%",type:"datetime",onValueChanged:function(t){}}},{name:"endDate",dataField:"EndDate",editorType:"dxDateBox",label:{text:"Fim"},validationRules:[{type:"required",message:"Informe a data final."}],editorOptions:{width:"100%",type:"datetime",readOnly:!1}},{dataField:"Padrinho",editorType:"dxTextBox",label:{text:"Padrinho"}},{dataField:"Consultor",editorType:"dxTextBox",label:{text:"Consultor"}},{dataField:"Situacao",editorType:"dxRadioGroup",label:{text:"Status"},validationRules:[{type:"required",message:"Informe o status."}],editorOptions:{dataSource:["ABERTO","FINALIZADO"],itemTemplate:function(t){return"".concat(t)}}}])}}},h=D,y=(a("930a"),a("2877")),T=Object(y["a"])(h,o,n,!1,null,"0a750d60",null);e["default"]=T.exports}}]);
//# sourceMappingURL=chunk-a05a5358.89c1fa53.js.map