(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb976e74"],{"1aa3":function(t,e,a){"use strict";var i=a("1fe6"),r=a.n(i);r.a},"1fe6":function(t,e,a){},ab68:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"content-block"},[t._v("Mala direta")]),a("div",{staticClass:"content-block",attrs:{id:"bloco1"}},[a("div",{staticClass:"dx-card responsive-paddings"},[a("div",[a("dx-form",{attrs:{id:"form","col-count":2,"form-data":t.malaDireta}},[a("dx-item",{attrs:{"editor-options":{disabled:!1,value:"",items:t.treinamentos,colSpan:"2",displayExpr:"nome",valueExpr:"id"},"data-field":"treinamento_id","editor-type":"dxTagBox",label:{text:"Treinamentos realizados"},"col-span":2}}),a("dx-item",{attrs:{"editor-options":{disabled:!1,value:"",items:t.treinamentos,colSpan:"2",displayExpr:"nome",valueExpr:"id"},"data-field":"not_treinamento_id","editor-type":"dxTagBox",label:{text:"Treinamentos não realizados"},"col-span":2}}),a("dx-item",{attrs:{"editor-options":{disabled:!1,items:t.estado_civil},"data-field":"estado_civil","editor-type":"dxTagBox",label:{text:"Estado Civil"},"col-span":1}}),a("dx-item",{attrs:{"editor-options":{disabled:!1,items:t.sexos,showClearButton:!0},"data-field":"sexo","editor-type":"dxSelectBox",label:{text:"Sexo"},"col-span":1}})],1),a("dx-button",{staticStyle:{"margin-left":"20px","margin-top":"15px"},attrs:{"styling-mode":"outlined",text:"Localizar"},on:{click:t.onLocalizar}}),t.selecionados.length>0?a("dx-button",{staticStyle:{"margin-left":"20px","margin-top":"15px"},attrs:{"styling-mode":"outlined",text:"Editar Email"},on:{click:t.onEditarEmail}}):t._e()],1),a("dx-data-grid",{staticStyle:{"margin-top":"15px"},attrs:{"data-source":t.dataSource,"key-expr":"pessoa_id","show-borders":!0,"selected-row-keys":t.selecionados},on:{"selection-changed":t.onSelectionChanged}},[a("dx-filter-row",{attrs:{visible:!1,"apply-filter":"auto"}}),a("dx-column",{attrs:{caption:"Nome","data-field":"pessoa"}}),a("dx-column",{attrs:{caption:"Sexo","data-field":"sexo"}}),a("dx-column",{attrs:{caption:"Estado Civil","data-field":"estado_civil"}}),a("dx-column",{attrs:{caption:"email","data-field":"email"}}),a("dx-paging",{attrs:{"page-size":t.paginas}}),a("dx-selection",{attrs:{"select-all-mode":t.allMode,"show-check-boxes-mode":t.checkBoxesMode,mode:"multiple"}})],1)],1)]),a("dx-popup",{staticClass:"popup",attrs:{visible:t.popupVisible,"drag-enabled":!0,"close-on-outside-click":!1,"show-title":!0,width:300,height:250,title:"Editar layout email",titleTemplate:"<div style='padding: 5px;'><b>Editar layout email</b></div>",fullScreen:!0,deferRendering:!0},on:{"update:visible":function(e){t.popupVisible=e}}},[a("div",{staticStyle:{pading:"20px"}},[a("MyEditorHtml",{attrs:{pessoas:t.selecionadosLista,filtros:t.malaDireta},on:{fechar:function(e){t.popupVisible=!1}}})],1)])],1)},r=[],n=(a("ac6a"),a("55dd"),a("96cf"),a("3b8d")),o=a("d736"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"20px"}},[t._m(0),a("dx-form",{attrs:{"form-data":t.formData}},[a("dx-group-item",[a("dx-simple-item",{attrs:{"data-field":"titulo"}})],1)],1),a("dx-html-editor",{staticStyle:{"margin-top":"15px"},attrs:{height:t.EditorHeight,value:t.emailEditor,id:"editor"},on:{input:function(e){return t.$emit("input",e.target.value)},"update:value":function(e){t.emailEditor=e}},model:{value:t.emailEditor,callback:function(e){t.emailEditor=e},expression:"emailEditor"}},[a("dx-toolbar",[a("dx-item",{attrs:{"format-name":"undo"}}),a("dx-item",{attrs:{"format-name":"redo"}}),a("dx-item",{attrs:{"format-name":"separator"}}),a("dx-item",{attrs:{"format-values":t.sizeValues,"format-name":"size"}}),a("dx-item",{attrs:{"format-values":t.fontValues,"format-name":"font"}}),a("dx-item",{attrs:{"format-name":"separator"}}),a("dx-item",{attrs:{"format-name":"bold"}}),a("dx-item",{attrs:{"format-name":"italic"}}),a("dx-item",{attrs:{"format-name":"strike"}}),a("dx-item",{attrs:{"format-name":"underline"}}),a("dx-item",{attrs:{"format-name":"separator"}}),a("dx-item",{attrs:{"format-name":"alignLeft"}}),a("dx-item",{attrs:{"format-name":"alignCenter"}}),a("dx-item",{attrs:{"format-name":"alignRight"}}),a("dx-item",{attrs:{"format-name":"alignJustify"}}),a("dx-item",{attrs:{"format-name":"separator"}}),a("dx-item",{attrs:{"format-name":"color"}}),a("dx-item",{attrs:{"format-name":"background"}}),a("dx-item",{attrs:{"format-name":"separator"}}),a("dx-item",{attrs:{"format-name":"link"}}),a("dx-item",{attrs:{"format-name":"image"}})],1)],1),a("div",{staticStyle:{float:"left","margin-top":"20px"}},[a("dx-button",{staticStyle:{"margin-right":"10px"},attrs:{text:"Email teste"},on:{click:t.testeEmail}}),a("dx-button",{staticStyle:{"margin-right":"10px"},attrs:{text:"Disparar email",type:"success"},on:{click:t.gravar}}),a("dx-button",{attrs:{text:"Voltar"},on:{click:t.cancelar}})],1)],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 col-sm-12 col-md-12"})])}],c=a("bc3a"),d=a.n(c),m=a("2919"),u={getLocalizar:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(m["c"])(),t.prev=1,t.next=4,d.a.post("".concat(m["a"],"/maladireta/localizar"),e);case 4:return a=t.sent,i=a.data,Object(m["c"])(),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),Object(m["c"])(),t.t0.message;case 14:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e){return t.apply(this,arguments)}return e}(),dispararEmail:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(m["c"])(),t.prev=1,t.next=4,d.a.post("".concat(m["a"],"/maladireta/disparo"),e);case 4:return a=t.sent,Object(m["c"])(),i=a.data,t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),Object(m["c"])(),t.t0.message;case 14:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e){return t.apply(this,arguments)}return e}(),dispararTesteEmail:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(m["c"])(),t.prev=1,t.next=4,d.a.post("".concat(m["a"],"/maladireta/disparoTeste"),e);case 4:return a=t.sent,Object(m["c"])(),i=a.data,t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),Object(m["c"])(),t.t0.message;case 14:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e){return t.apply(this,arguments)}return e}()},p=a("a719"),x=a.n(p),f=a("9fc8"),h=a("5c5d"),g=a("6a70"),v=a("66dc"),b={components:{DxHtmlEditor:g["DxHtmlEditor"],DxToolbar:g["DxToolbar"],DxItem:g["DxItem"],DxForm:v["DxForm"],DxSimpleItem:v["DxSimpleItem"],DxGroupItem:v["DxGroupItem"],DxLabel:v["DxLabel"],DxButton:f["DxButton"]},computed:{screen:function(){return this.$store.getters["common/screen"]}},props:{pessoas:{type:Array,default:function(){return[]}},filtros:{type:Object,default:function(){}}},watch:{screen:function(t){console.log("screen....>> ",t),t.isSmall&&(this.EditorHeight=500),t.isLarge&&(this.EditorHeight=850),t.isMedium&&(this.EditorHeight=650),t.isXSmall&&(this.EditorHeight=400)}},data:function(){return{popupVisible:!1,emailEditor:"",EditorHeight:500,formData:{titulo:"Mala direta"},sizeValues:["8pt","10pt","12pt","14pt","18pt","24pt","36pt"],fontValues:["Arial","Courier New","Georgia","Impact","Lucida Console","Tahoma","Times New Roman","Verdana"]}},methods:{gravar:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$nextTick(function(){var t=this,e=Object(h["confirm"])("<div style='margin-left:15px!important;margin-right:15px!important;'><p>&nbsp;Confirma o disparo de emails?</p></div>","  Confirmação");e.then(function(e){e&&u.dispararEmail({titulo:t.formData.titulo,emailHtml:t.emailEditor,filtros:t.filtros,pessoas:t.pessoas}).then(function(e){t.mensagem("Email enviado com sucesso. Verifique sua caixa postal.","success")}).catch(function(e){t.mensagem("Email não enviado. Tente novamente!")})})});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),testeEmail:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$nextTick(function(){var t=this,e=Object(h["confirm"])("<div style='margin-left:15px!important;margin-right:15px!important;'><p>&nbsp;Confirma o envio de email teste?</p></div>","  Confirmação");e.then(function(e){e&&u.dispararTesteEmail({titulo:t.formData.titulo,emailHtml:t.emailEditor}).then(function(e){t.mensagem("Email enviado com sucesso. Verifique sua caixa postal.","success")}).catch(function(e){t.mensagem("Email não enviado. Tente novamente!")})})});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cancelar:function(){this.$emit("fechar",!0)},mensagem:function(t,e){_.isEmpty(e)&&(e="error");var a={at:"center center",of:"#bloco1"};x()({message:t,position:a,width:300,shading:!0},e,3e3)}}},D=b,E=(a("ed4d"),a("2877")),w=Object(E["a"])(D,s,l,!1,null,null,null),y=w.exports,k=a("d30a"),S=a("2597"),O=a.n(S),C=a("5097"),R=a.n(C),T=a("5d4a"),j=a("656d"),z=(new Intl.NumberFormat("pt-BR",{style:"decimal",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}),new R.a({store:new O.a({key:"pessoa_id",load:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,i,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a={},a.take=e.take,0===e.skip?a.skip=1:a.skip=e.skip/e.take+1,i={isLocalizar:!0},r=null,e.localizar?(r=e.localizar,_.has(r,"sexo")&&(""===r.sexo&&delete r["sexo"],_.isNull(r.sexo)&&delete r["sexo"]),_.has(r,"estado_civil")&&0===r.estado_civil.length&&delete r["estado_civil"],_.has(r,"treinamento_id")&&0===r.treinamento_id.length&&delete r["treinamento_id"],_.has(r,"not_treinamento_id")&&0===r.not_treinamento_id.length&&delete r["not_treinamento_id"]):e.localizar=null,null,_.isArray(e.sort)&&(!0,i["sortSelector"]=e.sort[0].selector,i["sortDirection"]=e.sort[0].desc?"DESC":"ASC"),_.has(e,"start")){t.next=11;break}return i.nome="xxx",t.abrupt("return",[]);case 11:if(!_.isEmpty(r)){t.next=13;break}return t.abrupt("return",[]);case 13:return t.next=15,u.getLocalizar(r);case 15:return n=t.sent,t.abrupt("return",n);case 17:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()})})),I={components:{DxDataGrid:k["DxDataGrid"],DxColumn:k["DxColumn"],DxFilterRow:k["DxFilterRow"],DxEditing:k["DxEditing"],DxPaging:k["DxPaging"],DxPager:k["DxPager"],DxSearchPanel:k["DxSearchPanel"],DxSelectBox:f["DxSelectBox"],DxButton:f["DxButton"],DxTextBox:f["DxTextBox"],DxForm:v["DxForm"],DxItem:v["DxItem"],DxSelection:k["DxSelection"],DxPopup:o["DxPopup"],MyEditorHtml:y},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j["a"].getTreinamentosIndex({});case 2:e=t.sent,this.treinamentos=e.data;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){window.w=this},computed:{},data:function(){return{pattern:/^\(\d{3}\) \d{3}-\d{2}$/i,moedaFormat:{type:"currency",precision:2},malaDireta:{},treinamentos:[],allMode:"allPages",checkBoxesMode:"always",paginas:12,selecionados:[],selecionadosLista:[],emailEditor:null,popupVisible:!1,estado_civil:["SOLTEIRO","CASADO","UNIÃO ESTÁVEL","DIVOCIADO"],sexos:["MASCULINO","FEMININO"],dataSource:z,editButtons:[{hint:"Editar",icon:"edit",visible:this.btnEditar,onClick:this.onEditClick},{hint:"Excluir",icon:"trash",visible:!0,onClick:this.onDeleteClick}],remoteOperations:{sorting:!0,paging:!0},paging:{pageSize:5},pager:{showPageSizeSelector:!0,allowedPageSizes:[5,10,15,20],showInfo:!0},key:"nome",value:"",start:!1}},methods:{formatMessage:T["formatMessage"],onSelectionChanged:function(t){var e=t.selectedRowKeys,a=t.selectedRowsData;this.selecionados=e;var i=[];a.forEach(function(t){i.push({pessoa_id:t.pessoa_id,pessoa:t.pessoa,email:t.email})}),this.selecionadosLista=i},onLocalizar:function(){var t=this.malaDireta;this.dataSource.loadOptions()["localizar"]=t,this.dataSource.loadOptions()["start"]=!0,this.dataSource.reload()},onEditarEmail:function(){this.popupVisible=!this.popupVisible}}},B=I,L=(a("1aa3"),Object(E["a"])(B,i,r,!1,null,"715d4f2d",null));e["default"]=L.exports},ad94:function(t,e,a){},ed4d:function(t,e,a){"use strict";var i=a("ad94"),r=a.n(i);r.a}}]);
//# sourceMappingURL=chunk-eb976e74.e9f6ddda.js.map